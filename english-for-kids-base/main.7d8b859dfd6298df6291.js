(()=>{"use strict";var e={737:(e,t,n)=>{n.r(t)},76:(e,t,n)=>{n.r(t)},850:(e,t,n)=>{n.r(t)},105:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},570:(e,t,n)=>{n.r(t)},55:(e,t,n)=>{n.r(t)},855:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(583),r=n(977),a=n(0),o=n(635),d=n(366),l=n(489),c=n(999);t.App=class{constructor(e){this.rootElement=e,this.isGame=!1,this.categoryNumber=0,this.footer=new a.Footer,this.sideNavigation=new c.SideNavigation,this.main=new s.BaseComponent("main",["main"]),this.header=new d.Header,this.gameField=new o.GameField}renderStartPage(){document.body.addEventListener("click",(e=>{const t=e.target;!this.sideNavigation.element.matches(".show")||t.closest(".side-navigation")||t.closest(".burger-btn")||this.toggleMenu()})),this.header.burgerButton.onClick((()=>{this.toggleMenu()})),this.header.switchButton.onInput((()=>{var e,t;document.body.classList.toggle("game"),!1===this.isGame?(this.isGame=!0,(null===(e=this.main.element.firstElementChild)||void 0===e?void 0:e.matches(".train"))&&this.startGame()):(this.isGame=!1,(null===(t=this.main.element.firstElementChild)||void 0===t?void 0:t.matches(".game-field"))&&this.renderTrainField(this.categoryNumber))})),this.sideNavigation.createCategoryList((e=>{const t=e.target.getAttribute("data-category");this.categoryNumber=t?+t:1,this.toggleMenu(),t&&(this.showActiveLink(t),0==+t&&this.renderMain(),+t>0&&!1===this.isGame&&this.renderTrainField(this.categoryNumber),+t>0&&!0===this.isGame&&this.startGame())})),this.renderMain(),this.rootElement.append(this.sideNavigation.element,this.header.element,this.main.element,this.footer.element)}renderMain(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./cards.json"),t=yield e.json(),n=t[0];this.main.element.innerHTML="",this.showActiveLink(`${n.indexOf("Main-page")}`);for(let e=1;e<t.length;e++){const i=t[e],s=new l.MainCard;s.element.setAttribute("data-category",`${e}`),s.renderCard(i[0].image,n[e]),s.onClick((()=>{this.categoryNumber=e,!1===this.isGame&&this.renderTrainField(e),!0===this.isGame&&this.startGame(),this.showActiveLink(`${e}`)})),this.main.element.append(s.element)}}))}toggleMenu(){this.header.burgerButton.element.classList.toggle("active"),this.sideNavigation.element.classList.toggle("show")}renderTrainField(e){return i(this,void 0,void 0,(function*(){const t=yield fetch("./cards.json"),n=(yield t.json())[e],i=new s.BaseComponent("div",["train"]);this.main.element.innerHTML="";for(let e=0;e<n.length;e++){const t=n[e].image,s=n[e].word,a=n[e].translation,o=n[e].audioSrc,d=new r.Card;d.element.setAttribute("data-word",s),d.renderCard(t,s,a),d.cardOnclick((()=>{const e=new Audio(o);d.element.firstChild.classList.contains("turn")||e.play()})),i.element.append(d.element)}this.main.element.append(i.element)}))}startGame(){this.main.element.innerHTML="",this.gameField.renderGameField(this.categoryNumber,(()=>this.renderMain())),this.main.element.append(this.gameField.element)}showActiveLink(e){this.sideNavigation.element.querySelectorAll("li").forEach((t=>{t.classList.remove("active-link"),t.getAttribute("data-category")===e&&t.classList.add("active-link")}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},631:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BurgerButton=void 0;const i=n(583);n(737);class s extends i.BaseComponent{constructor(){super("div",["burger-btn"]),this.element.innerHTML='\n      <div class="top-line line"></div>\n      <div class="middle-line line"></div>\n      <div class="bottom-line line"></div>\n    '}onClick(e){this.element.addEventListener("click",e)}}t.BurgerButton=s},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const i=n(583);n(76);class s extends i.BaseComponent{constructor(){super("div",["card-container"]),this.card=new i.BaseComponent("div",["card"]),this.cardFront=new i.BaseComponent("div",["card__front"]),this.cardBack=new i.BaseComponent("div",["card__back"]),this.flipBtn=new i.BaseComponent("div",["flip-btn"])}renderCard(e,t,n){const s=new i.BaseComponent("div",["description"]),r=new i.BaseComponent("div",["description"]);this.cardFront.element.style.backgroundImage=`url(${e})`,this.cardBack.element.style.backgroundImage=`url(${e})`,s.element.textContent=`${t}`,r.element.textContent=`${n}`,this.flipBtn.element.addEventListener("click",(e=>{this.turnCardBack(),e.stopPropagation()})),this.card.element.addEventListener("mouseleave",(()=>{this.turnCardFront()})),this.cardFront.element.append(s.element),this.cardBack.element.append(r.element),this.card.element.append(this.cardFront.element,this.cardBack.element,this.flipBtn.element),this.element.append(this.card.element)}cardOnclick(e){this.card.element.addEventListener("click",e)}turnCardBack(){this.card.element.classList.toggle("turn")}turnCardFront(){this.card.element.classList.contains("turn")&&this.card.element.classList.remove("turn")}}t.Card=s},0:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;const i=n(583);n(850);class s extends i.BaseComponent{constructor(){super("footer",["footer"]),this.element.innerHTML='\n      <div class="git">\n        <a href="https://github.com/StudyObolonskiy" target="_blank"></a>\n      </div>\n      <div class="year">2021</div>\n      <div class="rss">\n      <a href="https://rs.school/js/" target="_blank"></a>\n      </div>\n    '}}t.Footer=s},635:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameField=void 0;const s=n(583),r=n(977);n(105);class a extends s.BaseComponent{constructor(){super("div",["game-field"]),this.isGameStart=!1,this.cardsNumber=0,this.guessedCardsNumber=0,this.mistakeNumber=0,this.cardField=new s.BaseComponent("div",["card-field"]),this.progressBlock=new s.BaseComponent("div",["progress-block"]),this.errorSound=new Audio("audio/error.mp3"),this.correctSound=new Audio("audio/correct.mp3"),this.successSound=new Audio("audio/success.mp3"),this.failSound=new Audio("audio/failure.mp3"),this.currentWordSound=new Audio}renderGameField(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch("./cards.json"),s=(yield n.json())[e],a=s.map((e=>e.word)).sort((()=>Math.random()-.5));this.clean(),this.cardsNumber=s.length;for(let e=0;e<s.length;e++){const n=s[e].word,o=new r.Card;o.element.setAttribute("data-word",n),o.renderCard(s[e].image,n,s[e].translation),o.cardOnclick((()=>i(this,void 0,void 0,(function*(){a.length>0&&this.isGameStart&&(o.element.getAttribute("data-word")!==a[0]&&(this.errorSound.play(),this.addMissStar(),this.mistakeNumber+=1),o.element.getAttribute("data-word")===a[0]&&(o.element.classList.add("guess"),this.correctSound.play(),this.addGuessStar(),this.guessedCardsNumber+=1,a.shift(),a.length>0&&(this.currentWordSound.src=`audio/${a[0]}.mp3`,this.currentWordSound.play()))),this.cardsNumber===this.guessedCardsNumber&&(0===this.mistakeNumber&&this.renderWinPopup(t),this.mistakeNumber>0&&this.renderFailPopup(t))})))),this.cardField.element.append(o.element)}this.currentWordSound.src=`audio/${a[0]}.mp3`,this.element.append(this.progressBlock.element,this.cardField.element),this.addStartGameBotton()}))}addStartGameBotton(){const e=new s.BaseComponent("button",["start-game-btn"]);e.element.textContent="Start Game",e.element.addEventListener("click",(()=>{e.element.matches(".started")||(e.element.classList.add("started"),e.element.textContent="",this.isGameStart=!0),this.currentWordSound.play()})),this.element.append(e.element)}addGuessStar(){const e=document.createElement("div");e.classList.add("star-guess"),this.progressBlock.element.prepend(e)}addMissStar(){const e=document.createElement("div");e.classList.add("star-miss"),this.progressBlock.element.prepend(e)}clean(){this.cardField.element.innerHTML="",this.element.innerHTML="",this.progressBlock.element.innerHTML="",this.cardsNumber=0,this.guessedCardsNumber=0,this.mistakeNumber=0,this.isGameStart=!1}renderWinPopup(e){this.successSound.play();const t=new s.BaseComponent("div",["win-popup"]);t.element.textContent="You did a great job! Not a single mistake. Well done, congratulations!",this.element.append(t.element),setTimeout((()=>{t.element.remove(),e()}),5e3)}renderFailPopup(e){this.failSound.play();const t=new s.BaseComponent("div",["fail-popup"]);t.element.textContent=`\n      Don't be upset you made only ${this.mistakeNumber} mistake(s).\n      Next time you will definitely succeed!\n    `,this.element.append(t.element),setTimeout((()=>{t.element.remove(),e()}),5e3)}}t.GameField=a},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(583),s=n(631),r=n(44);n(528);class a extends i.BaseComponent{constructor(){super("header",["header"]),this.burgerButton=new s.BurgerButton,this.switchButton=new r.SwitchButton,this.element.append(this.burgerButton.element,this.switchButton.element)}}t.Header=a},167:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,t.Input=class{constructor(e,t){this.element=document.createElement("input"),this.element.classList.add(...e),t.forEach((e=>{const[t,n]=e;this.element.setAttribute(t,n)}))}}},489:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainCard=void 0;const i=n(583);n(570);class s extends i.BaseComponent{constructor(){super("div",["main-card"])}renderCard(e,t){this.element.innerHTML=`\n      <div class="main-card__image">\n        <img src="${e}" alt="${t}">\n      </div>\n      <p>${t}</p>\n    `}onClick(e){this.element.addEventListener("click",e)}}t.MainCard=s},999:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function o(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SideNavigation=void 0;const s=n(583);n(55);class r extends s.BaseComponent{constructor(){super("nav",["side-navigation"]),this.navigationItems=new s.BaseComponent("ul",["navigation-items"])}createCategoryList(e){return i(this,void 0,void 0,(function*(){const t=yield fetch("./cards.json");(yield t.json())[0].forEach(((t,n)=>{const i=new s.BaseComponent("li",["navigation-item"]);i.element.setAttribute("data-category",`${n}`),i.element.textContent=`${t}`,i.element.addEventListener("click",e),this.navigationItems.element.append(i.element),this.element.append(this.navigationItems.element)}))}))}}t.SideNavigation=r},44:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchButton=void 0;const i=n(583),s=n(167);n(855);class r extends i.BaseComponent{constructor(){super("label",["switch-btn"]),this.switchInput=new s.Input(["switch-input"],[["type","checkbox"]]),this.switchSlider=new i.BaseComponent("div",["switch-slider"]),this.element.append(this.switchInput.element,this.switchSlider.element)}onInput(e){this.switchInput.element.addEventListener("input",e)}}t.SwitchButton=r}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(752);n(387),window.onload=()=>{new e.App(document.body).renderStartPage()}})()})();