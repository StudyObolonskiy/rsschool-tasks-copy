(()=>{"use strict";var e={7:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},49:(e,t,n)=>{n.r(t)},640:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(977),i=n(743);t.App=class{constructor(e){this.rootElement=e,this.header=new r.Header,this.main=new i.Main,this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.main.element)}start(){this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.main.element)}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},553:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarForm=void 0;const r=n(583),i=n(378),s=n(744);class a extends r.BaseComponent{constructor(e,t){super("form",e),this.nameInput=new s.Input(["name-input"],[["type","text"]]),this.colorInput=new s.Input(["color-input"],[["type","color"]]),this.submitBtn=new i.Button(["submit-btn"],t),this.element.appendChild(this.nameInput.element),this.element.appendChild(this.colorInput.element),this.element.appendChild(this.submitBtn.element)}onSubmit(e){this.element.addEventListener("submit",(t=>{t.preventDefault();const n=this.formCollector();e(n)}))}formCollector(){return{name:this.nameInput.getValue(),color:this.colorInput.getValue()}}setFormData(e){this.colorInput.setValue(e.color),this.nameInput.setValue(e.name)}}t.CarForm=a},881:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const r=n(38),i=n(657),s=n(583),a=n(378);n(7);class o extends s.BaseComponent{constructor(e){super("div",["car"]),this.carModel=e,this.element.innerHTML=`<span>${e.name}</span>`,this.carImage=new s.BaseComponent("div",["car-image"]),this.carImage.element.innerHTML=`<svg version="1.1"\n    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="98px" height="98px" viewBox="0 0 98 98"; xml:space="preserve">\n <g>\n   <g fill="${e.color}">\n     <path d="M17.275,52.156c-4.124,0-7.468,3.343-7.468,7.468c0,0.318,0.026,0.631,0.066,0.938c0.463,3.681,3.596,6.528,7.401,6.528\n       c3.908,0,7.112-3.004,7.437-6.83c0.017-0.209,0.031-0.422,0.031-0.637C24.743,55.499,21.4,52.156,17.275,52.156z M13.537,56.81\n       l1.522,1.523c-0.118,0.203-0.211,0.422-0.271,0.656h-2.146C12.752,58.177,13.063,57.435,13.537,56.81z M12.632,60.282h2.163\n       c0.061,0.23,0.151,0.448,0.271,0.648l-1.526,1.525C13.067,61.835,12.749,61.093,12.632,60.282z M16.629,64.263\n       c-0.809-0.113-1.544-0.43-2.166-0.899l1.518-1.519c0.2,0.117,0.419,0.203,0.648,0.263V64.263z M16.629,57.14\n       c-0.235,0.062-0.455,0.154-0.66,0.275l-1.521-1.521c0.625-0.475,1.367-0.789,2.181-0.902V57.14z M17.922,54.99\n       c0.814,0.113,1.557,0.429,2.181,0.903l-1.52,1.521c-0.204-0.121-0.426-0.213-0.66-0.275L17.922,54.99L17.922,54.99z\n        M17.922,64.261v-2.152c0.23-0.061,0.447-0.146,0.647-0.264l1.519,1.519C19.466,63.833,18.73,64.148,17.922,64.261z\n        M21.014,62.462l-1.531-1.533c0.12-0.201,0.217-0.416,0.278-0.646h2.146C21.793,61.091,21.488,61.839,21.014,62.462z\n        M19.764,58.989c-0.061-0.234-0.153-0.453-0.271-0.656l1.524-1.523c0.471,0.625,0.782,1.367,0.894,2.18H19.764z"/>\n     <path d="M79.284,52.156c-4.124,0-7.468,3.343-7.468,7.468c0,0.318,0.026,0.631,0.066,0.938c0.463,3.681,3.596,6.528,7.4,6.528\n       c3.908,0,7.112-3.004,7.438-6.83c0.017-0.209,0.031-0.422,0.031-0.637C86.753,55.499,83.409,52.156,79.284,52.156z M75.546,56.81\n       l1.521,1.523c-0.118,0.203-0.211,0.422-0.271,0.656H74.65C74.761,58.177,75.072,57.435,75.546,56.81z M74.642,60.282h2.163\n       c0.061,0.23,0.151,0.448,0.271,0.648l-1.525,1.525C75.076,61.835,74.757,61.093,74.642,60.282z M78.638,64.263\n       c-0.809-0.113-1.544-0.43-2.166-0.899l1.518-1.519c0.2,0.117,0.419,0.203,0.648,0.263V64.263z M78.638,57.14\n       c-0.235,0.062-0.455,0.154-0.66,0.275l-1.521-1.521c0.625-0.475,1.366-0.789,2.181-0.902V57.14z M79.932,54.99\n       c0.814,0.113,1.557,0.429,2.181,0.903l-1.521,1.521c-0.204-0.121-0.426-0.215-0.66-0.275V54.99z M79.932,64.261v-2.152\n       c0.23-0.061,0.447-0.146,0.647-0.264l1.519,1.519C81.476,63.833,80.739,64.148,79.932,64.261z M83.023,62.462l-1.531-1.531\n       c0.12-0.202,0.218-0.416,0.278-0.647h2.146C83.802,61.091,83.498,61.839,83.023,62.462z M81.773,58.989\n       c-0.061-0.234-0.152-0.453-0.271-0.656l1.523-1.523c0.472,0.625,0.782,1.367,0.895,2.18H81.773z"/>\n     <path d="M97.216,48.29v-5.526c0-0.889-0.646-1.642-1.524-1.779c-2.107-0.33-5.842-0.953-7.52-1.47\n       c-2.406-0.742-11.702-4.678-14.921-5.417c-3.22-0.739-17.738-4.685-31.643,0.135c-2.353,0.815-12.938,5.875-19.162,8.506\n       c-1.833,0.04-19.976,3.822-20.942,6.414c-0.966,2.593-1.269,3.851-1.447,4.509c-0.178,0.658,0,3.807,1.348,6\n       c1.374,0.777,4.019,1.299,7.077,1.649c-0.035-0.187-0.073-0.371-0.097-0.56c-0.053-0.404-0.078-0.773-0.078-1.125\n       c0-4.945,4.022-8.969,8.968-8.969s8.968,4.023,8.968,8.969c0,0.254-0.017,0.506-0.036,0.754c-0.047,0.555-0.147,1.094-0.292,1.613\n       c0.007,0,0.024,0,0.024,0l44.516-0.896c-0.02-0.115-0.046-0.229-0.061-0.346c-0.053-0.402-0.078-0.772-0.078-1.125\n       c0-4.945,4.022-8.968,8.968-8.968c4.946,0,8.969,4.022,8.969,8.968c0,0.019-0.002,0.035-0.003,0.053l0.19-0.016l7.611-1.433\n       c0,0,2.915-1.552,2.915-5.822C98.967,49.56,97.216,48.29,97.216,48.29z M53.057,43.051L36.432,43.56\n       c0.306-2.491-1.169-3.05-1.169-3.05c6.609-5.999,19.929-6.202,19.929-6.202L53.057,43.051z M71.715,42.29l-15.15,0.509l1.373-8.49\n       c7.83-0.102,12.303,1.626,12.303,1.626l2.237,3.61L71.715,42.29z M80.256,42.238h-4.221l-4.22-5.795\n       c3.166,1.26,5.7,2.502,7.209,3.287C79.94,40.206,80.44,41.223,80.256,42.238z"/>\n   </g>\n </g>`,this.selectBtn=new a.Button(["select-car-btn"],"SELECT"),this.removeBtn=new a.Button(["remove-car-btn"],"REMOVE"),this.element.append(this.selectBtn.element,this.removeBtn.element,this.carImage.element),this.selectBtn.onClick((()=>{i.state.setSelectedCar(this.carModel)})),this.removeBtn.onClick((()=>{r.garageService.deleteCar(this.carModel.id)}))}}t.Car=o},378:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const r=n(583);class i extends r.BaseComponent{constructor(e,t,n){super("button",e),n&&n.forEach((e=>{const[t,n]=e;this.element.setAttribute(t,n)})),this.element.textContent=t}onClick(e){this.element.addEventListener("click",(t=>{t.preventDefault(),e()}))}}t.Button=i},744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,t.Input=class{constructor(e,t){this.element=document.createElement("input"),this.element.classList.add(...e),t.forEach((e=>{const[t,n]=e;this.element.setAttribute(t,n)}))}onInput(e){this.element.addEventListener("input",e)}getValue(){return this.element.value}setValue(e){this.element.value=e}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const r=n(583);n(528);class i extends r.BaseComponent{constructor(){super("header",["header"]),this.element.innerHTML='\n            <nav>\n                <a href="#/garage">Garage</a>\n                <a href="#/winners">Winners</a>\n            </nav>'}}t.Header=i},743:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const r=n(583),i=n(957);class s extends r.BaseComponent{constructor(){super("main",["app"]),this.router=new i.Router,this.element.appendChild(this.router.element)}}t.Main=s},356:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function o(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GaragePage=void 0;const i=n(38),s=n(657),a=n(583),o=n(553),c=n(881),l=n(378);n(49);class h extends a.BaseComponent{constructor(){super("div",["garage"]),this.cars=[],this.allCarsNumber=0,this.pageNumber=1,this.maxPageNumber=1,this.element.innerHTML="<h1>GARAGE PAGE</h1>",this.pageTitle=new a.BaseComponent("h2",["page-title"]),this.carsNumberTitle=new a.BaseComponent("h3",["cars-number-title"]),this.element.append(this.pageTitle.element,this.carsNumberTitle.element),this.createCarForm=new o.CarForm(["create-car-form"],"CREATE CAR"),this.generateButton=new l.Button(["generate-btn"],"GENERATE CARS"),this.generateButton.onClick((()=>{for(let e=1;e<101;e++)this.generateRandomCars()})),this.createCarForm.onSubmit((e=>r(this,void 0,void 0,(function*(){yield i.garageService.createCar(e),this.init()})))),this.element.appendChild(this.createCarForm.element),this.updateCarForm=new o.CarForm(["create-car-form"],"UPDATE CAR"),this.updateCarForm.onSubmit((e=>r(this,void 0,void 0,(function*(){var t;const n=null===(t=s.state.getSelectedCar())||void 0===t?void 0:t.id;n&&n>=1&&(yield i.garageService.updateCar(n,e),this.init())})))),this.carsList=new a.BaseComponent("ul",["cars-list"]),this.nextButton=new l.Button(["next-btn","page-btn"],"NEXT"),this.prevButton=new l.Button(["prev-btn","page-btn"],"PREV"),this.element.appendChild(this.updateCarForm.element),this.element.append(this.generateButton.element,this.carsList.element),this.init(),s.state.subscribe((()=>{const e=s.state.getSelectedCar();e&&this.updateCarForm.setFormData(e)})),this.pagination(),this.removeCarFromPage()}init(){return r(this,void 0,void 0,(function*(){this.cars=yield i.garageService.getCars(this.pageNumber),this.renderCars(this.cars),yield this.getMaxPages(),this.showPageNumber(),this.showCarsNumbers()}))}renderCars(e){this.carsList.element.innerHTML="",e.forEach((e=>{const t=document.createElement("li");t.appendChild(new c.Car(e).element),this.carsList.element.appendChild(t)})),this.element.appendChild(this.carsList.element),this.element.append(this.prevButton.element,this.nextButton.element)}showPageNumber(){this.pageTitle.element.textContent=`Page #${this.pageNumber}`}showCarsNumbers(){this.carsNumberTitle.element.textContent=`Cars in garage (${this.allCarsNumber})`}getMaxPages(){return r(this,void 0,void 0,(function*(){this.allCarsNumber=yield i.garageService.getTotalCarsNumber(),this.maxPageNumber=Math.ceil(this.allCarsNumber/10)}))}pagination(){this.nextButton.onClick((()=>{this.pageNumber>=this.maxPageNumber||(this.pageNumber+=1,this.init())})),this.prevButton.onClick((()=>{1!==this.pageNumber&&(this.pageNumber-=1,this.init())}))}removeCarFromPage(){this.carsList.element.addEventListener("click",(e=>r(this,void 0,void 0,(function*(){e.target.matches(".remove-car-btn")&&(yield i.garageService.getCars(this.pageNumber),this.init())}))))}generateRandomCars(){return r(this,void 0,void 0,(function*(){const e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],t=["Scoda","Honda","Hyundai","BMW","Lada","WV","Porsche","Toyota"],n=["Karoq","Civic","Elantra","5-Series","Granta","Passat","Cayman","Camry"],r=t[Math.floor(Math.random()*t.length)],s=n[Math.floor(Math.random()*n.length)];let a="#";for(let t=0;t<6;t++)a+=e[Math.floor(Math.random()*e.length)];yield i.garageService.createCar({name:`${r} ${s}`,color:`${a}`}),this.init()}))}}t.GaragePage=h},443:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersPage=void 0;const r=n(583);class i extends r.BaseComponent{constructor(){super("div",["winners"]),this.element.innerHTML="<h1>Winners PAGE</h1>"}}t.WinnersPage=i},957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const r=n(677),i=n(583),s=n(356),a=n(443);n(640);class o extends i.BaseComponent{constructor(){super("div",["router-container"]),this.onChangeRoute=()=>{const e=this.routes.find((e=>e.path===window.location.hash.split("/")[1]));e?this.renderComponent(e.getComponent()):this.renderComponent(this.routes[0].getComponent())},this.garagePage=new s.GaragePage,this.routes=this.getRoutes(),window.onpopstate=this.onChangeRoute,this.onChangeRoute()}getRoutes(){return[{path:r.RoutesName.GARAGE,getComponent:()=>this.garagePage.element},{path:r.RoutesName.WINNERS,getComponent:()=>(new a.WinnersPage).element}]}renderComponent(e){this.element.innerHTML="",this.element.appendChild(e)}}t.Router=o},677:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RoutesName=void 0,(n=t.RoutesName||(t.RoutesName={})).GARAGE="garage",n.WINNERS="winners"},38:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function o(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.garageService=t.GarageService=void 0;const i=n(229);class s{constructor(e){this.restfulService=e}getCars(e=1){return r(this,void 0,void 0,(function*(){const t={_page:e,_limit:10},n=yield this.restfulService.get("/garage",t);return yield n.json()}))}getTotalCarsNumber(){return r(this,void 0,void 0,(function*(){const e=(yield this.restfulService.get("/garage",{_page:1,_limit:10})).headers.get("X-Total-Count");return e?+e:4}))}createCar(e){return r(this,void 0,void 0,(function*(){const t=yield this.restfulService.post("/garage",e);return yield t.json()}))}deleteCar(e){return r(this,void 0,void 0,(function*(){yield this.restfulService.delete(`/garage/${e}`)}))}updateCar(e,t){return r(this,void 0,void 0,(function*(){const n=yield this.restfulService.put(`/garage/${e}`,t);return yield n.json()}))}}t.GarageService=s,t.garageService=new s(i.restService)},229:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function o(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.restService=t.RestService=void 0;class r{constructor(){this.baseUrl="http://127.0.0.1:3000"}get(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e,t);return fetch(n)}))}post(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e);return fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}put(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e);return fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}delete(e){return n(this,void 0,void 0,(function*(){const t=this.createUrl(e);return fetch(t,{method:"DELETE"})}))}createUrl(e,t){let n=`${this.baseUrl}${e}`;return t&&(n+=Object.keys(t).reduce(((e,n,r)=>`${e}${0===r?"":"&"}${n}=${t[n]}`),"?")),n}}t.RestService=r,t.restService=new r},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,t.state=new class{constructor(){this.subscribers=[],this.state={garage:{selectedCar:{name:"",color:"",id:-1}}}}subscribe(e){this.subscribers.push(e)}callSubscribers(){this.subscribers.forEach((e=>e(this.state)))}getSelectedCar(){return this.state.garage.selectedCar}setSelectedCar(e){this.state.garage.selectedCar=e,this.callSubscribers()}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(752);n(387),window.onload=()=>{const t=document.body;if(!t)throw new Error("App root element not found");new e.App(t).start()}})()})();